<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#7B4B2A">
    <meta name="color-scheme" content="light only">
    <title>Coco Money</title>
    <link rel="stylesheet" href="styles/global.css">
    <link rel="stylesheet" href="styles/header.css">
    <link rel="stylesheet" href="styles/coco-money.css">
</head>
<body>
    <header class="header">
        <div class="header-content">
            <button class="back-btn" onclick="window.location.href='index.html'">‚Üê –ù–∞–∑–∞–¥</button>
            <h1 class="logo">Coco Money</h1>
            <div class="header-actions"></div>
        </div>
    </header>

    <main class="main-content">
        <div id="coco-money-root">
            <div class="tabs-container">
                <button class="tab-btn active" data-tab="regular" onclick="cocoMoney.switchTab('regular')">
                    –î–æ—Ö–æ–¥–Ω—ã–µ –ª–∏—Å—Ç—ã
                </button>
                <button class="tab-btn" data-tab="preliminary" onclick="cocoMoney.switchTab('preliminary')">
                    –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ
                </button>
            </div>
            
            <div id="no-data" class="card no-data" style="display: none;">
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ—Ö–æ–¥–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤</p>
                <button class="primary-btn" onclick="cocoMoney.showIncomeForm()">–î–æ–±–∞–≤–∏—Ç—å –¥–æ—Ö–æ–¥–Ω—ã–π –ª–∏—Å—Ç</button>
            </div>
            
            <div id="no-data-preliminary" class="card no-data" style="display: none;">
                <p>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ª–∏—Å—Ç–æ–≤</p>
                <button class="primary-btn" onclick="cocoMoney.showIncomeForm(true)">–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ª–∏—Å—Ç</button>
            </div>
            
            <div id="income-sheets-container"></div>
            
            <section id="statistics" class="statistics-section" style="display: none;">
                <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">–í—Å–µ–≥–æ –ª–∏—Å—Ç–æ–≤</div>
                        <div class="stat-value" id="total-sheets">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–û–±—â–∏–π –¥–æ—Ö–æ–¥</div>
                        <div class="stat-value" id="total-income">0 ‚ÇΩ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–û–±—â–∏–µ —Ä–∞—Å—Ö–æ–¥—ã</div>
                        <div class="stat-value" id="total-expenses">0 ‚ÇΩ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">–ß–∏—Å—Ç–∞—è –ø—Ä–∏–±—ã–ª—å</div>
                        <div class="stat-value" id="net-profit">0 ‚ÇΩ</div>
                    </div>
                </div>
                <div class="categories-breakdown" id="categories-breakdown"></div>
            </section>
        </div>
    </main>

    <button id="add-income-btn" class="fab-button" onclick="cocoMoney.showIncomeForm()" aria-label="–î–æ–±–∞–≤–∏—Ç—å –ª–∏—Å—Ç">+</button>

    <div class="modal" id="income-form-modal">
        <div class="modal-content">
            <span class="close" onclick="cocoMoney.hideIncomeForm()">&times;</span>
            <h2>–ù–æ–≤—ã–π –¥–æ—Ö–æ–¥–Ω—ã–π –ª–∏—Å—Ç</h2>
            <form id="income-form" onsubmit="cocoMoney.addIncomeSheet(event)">
                <input type="text" name="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ª–∏—Å—Ç–∞" required>
                <input type="number" name="amount" placeholder="–°—É–º–º–∞ –¥–æ—Ö–æ–¥–∞" step="0.01" required>
                <input type="date" name="date" required>
                <textarea name="note" placeholder="–ó–∞–º–µ—Ç–∫–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>
                <label class="checkbox-label">
                    <input type="checkbox" name="preliminary">
                    –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –¥–æ—Ö–æ–¥
                </label>
                <button type="submit" class="primary-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </form>
        </div>
    </div>

    <div class="modal" id="export-modal">
        <div class="modal-content export-modal">
            <span class="close" onclick="cocoMoney.hideExportModal()">&times;</span>
            <h2>–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h2>
            <textarea id="export-content" readonly></textarea>
            <div class="modal-buttons">
                <button class="primary-btn" onclick="cocoMoney.downloadData()">üíæ –°–∫–∞—á–∞—Ç—å</button>
                <button class="secondary-btn" onclick="cocoMoney.copyData()">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
            </div>
            <div id="copy-notification" class="notification" style="display: none;">–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!</div>
        </div>
    </div>

    <div class="modal" id="edit-sheet-modal">
        <div class="modal-content">
            <span class="close" onclick="cocoMoney.hideEditForm()">&times;</span>
            <h2>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–∏—Å—Ç</h2>
            <form id="edit-sheet-form" onsubmit="cocoMoney.updateSheet(event)">
                <input type="hidden" name="sheetId">
                <input type="text" name="title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ª–∏—Å—Ç–∞" required>
                <input type="number" name="amount" placeholder="–°—É–º–º–∞ –¥–æ—Ö–æ–¥–∞" step="0.01" required>
                <input type="date" name="date" required>
                <textarea name="note" placeholder="–ó–∞–º–µ—Ç–∫–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"></textarea>
                <button type="submit" class="primary-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
            </form>
        </div>
    </div>

    <div class="modal" id="category-modal">
        <div class="modal-content">
            <span class="close" onclick="cocoMoney.hideCategoryModal()">&times;</span>
            <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏</h2>
            <form id="add-category-form" onsubmit="cocoMoney.addCategory(event)">
                <input type="text" name="categoryName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" required>
                <button type="submit" class="primary-btn">–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é</button>
            </form>
            <div class="categories-list" id="categories-list"></div>
        </div>
    </div>

    <div class="modal" id="confirm-modal">
        <div class="modal-content confirm-modal">
            <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h3>
            <p id="confirm-message">–í—ã —Ç–æ—á–Ω–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –¥–æ—Ö–æ–¥–Ω—ã–π –ª–∏—Å—Ç?</p>
            <div class="modal-buttons">
                <button class="primary-btn" onclick="cocoMoney.confirmDelete()">–£–¥–∞–ª–∏—Ç—å</button>
                <button class="secondary-btn" onclick="cocoMoney.cancelDelete()">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script src="js/coco-money.js"></script>
</body>
</html>